{% extends 'base.html' %}

{% block title %}Trang chủ - Tra cứu tương tác thuốc{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="search-container text-white">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8 text-center">
                <h1 class="display-4 fw-bold mb-4">
                    <i class="fas fa-pills me-3"></i>Tra cứu tương tác thuốc
                </h1>
                <p class="lead mb-5">
                    Hệ thống tra cứu tương tác thuốc dựa trên dữ liệu từ Bộ Y tế Việt Nam. 
                    Tìm kiếm nhanh chóng và chính xác các tương tác thuốc.
                </p>
                
                <!-- Search Form -->
                <form action="{% url 'drugs:search' %}" method="get" class="mb-4">
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="input-group">
                                <input type="text" 
                                       name="q" 
                                       class="form-control search-input" 
                                       placeholder="Nhập tên thuốc hoặc hoạt chất (ví dụ: itraconazol dabigatran)"
                                       value="{{ request.GET.q }}">
                                <button type="submit" class="btn btn-primary btn-search">
                                    <i class="fas fa-search me-2"></i>Tìm kiếm
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
                
                <div class="row text-center">
                    <div class="col-md-4">
                        <div class="mb-3">
                            <i class="fas fa-shield-alt fa-2x mb-2"></i>
                            <h5>An toàn</h5>
                            <p class="small">Dữ liệu từ Bộ Y tế Việt Nam</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <i class="fas fa-bolt fa-2x mb-2"></i>
                            <h5>Nhanh chóng</h5>
                            <p class="small">Tìm kiếm tức thì</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="mb-3">
                            <i class="fas fa-mobile-alt fa-2x mb-2"></i>
                            <h5>Tiện lợi</h5>
                            <p class="small">Sử dụng mọi thiết bị</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section -->
<div class="container mb-5">
    <div class="row">
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-search fa-3x text-primary mb-3"></i>
                    <h5 class="card-title">Tìm kiếm thông minh</h5>
                    <p class="card-text">
                        Tìm kiếm theo tên thuốc, hoạt chất, cơ chế tương tác hoặc hậu quả.
                        Hỗ trợ tìm kiếm bằng tiếng Việt và tiếng Anh.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-exclamation-triangle fa-3x text-warning mb-3"></i>
                    <h5 class="card-title">Phân loại mức độ</h5>
                    <p class="card-text">
                        Phân loại tương tác theo mức độ: Chống chỉ định, Nghiêm trọng, 
                        Trung bình, Nhẹ để dễ dàng đánh giá nguy cơ.
                    </p>
                </div>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-code fa-3x text-success mb-3"></i>
                    <h5 class="card-title">API tích hợp</h5>
                    <p class="card-text">
                        Cung cấp REST API để tích hợp vào các hệ thống khác.
                        Dễ dàng kết nối với ứng dụng di động hoặc web app.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Stats -->
<div class="container mb-5">
    <div class="row text-center">
        <div class="col-md-3 mb-3">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h3 class="card-title">{{ total_interactions }}+</h3>
                    <p class="card-text">Tương tác thuốc</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h3 class="card-title">{{ total_drugs }}+</h3>
                    <p class="card-text">Thuốc được liệt kê</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card bg-warning text-white">
                <div class="card-body">
                    <h3 class="card-title">24/7</h3>
                    <p class="card-text">Truy cập liên tục</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <h3 class="card-title">API</h3>
                    <p class="card-text">RESTful API</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Severity Breakdown -->
{% if severity_breakdown %}
<div class="container mb-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie me-2"></i>Phân bố mức độ tương tác
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        {% if severity_breakdown.contraindicated %}
                        <div class="col-md-3 mb-3">
                            <div class="border border-danger rounded p-3">
                                <h4 class="text-danger">{{ severity_breakdown.contraindicated }}</h4>
                                <p class="mb-0 text-muted">Chống chỉ định</p>
                            </div>
                        </div>
                        {% endif %}
                        {% if severity_breakdown.major %}
                        <div class="col-md-3 mb-3">
                            <div class="border border-warning rounded p-3">
                                <h4 class="text-warning">{{ severity_breakdown.major }}</h4>
                                <p class="mb-0 text-muted">Nghiêm trọng</p>
                            </div>
                        </div>
                        {% endif %}
                        {% if severity_breakdown.moderate %}
                        <div class="col-md-3 mb-3">
                            <div class="border border-info rounded p-3">
                                <h4 class="text-info">{{ severity_breakdown.moderate }}</h4>
                                <p class="mb-0 text-muted">Trung bình</p>
                            </div>
                        </div>
                        {% endif %}
                        {% if severity_breakdown.minor %}
                        <div class="col-md-3 mb-3">
                            <div class="border border-success rounded p-3">
                                <h4 class="text-success">{{ severity_breakdown.minor }}</h4>
                                <p class="mb-0 text-muted">Nhẹ</p>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- How to Use -->
<div class="container mb-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card">
                <div class="card-header bg-light">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Hướng dẫn sử dụng</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6><i class="fas fa-search me-2"></i>Tìm kiếm cơ bản</h6>
                            <p class="small text-muted">
                                Nhập tên thuốc hoặc hoạt chất vào ô tìm kiếm. 
                                Ví dụ: "itraconazol dabigatran" hoặc "dabigatran itraconazol"
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-filter me-2"></i>Lọc theo mức độ</h6>
                            <p class="small text-muted">
                                Sử dụng bộ lọc để xem chỉ những tương tác ở mức độ nhất định: 
                                Chống chỉ định, Nghiêm trọng, Trung bình, Nhẹ
                            </p>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6><i class="fas fa-code me-2"></i>API Endpoints</h6>
                            <p class="small text-muted">
                                Truy cập <code>/api/drugs/</code> để lấy danh sách thuốc<br>
                                Truy cập <code>/api/interactions/</code> để lấy tương tác
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-mobile-alt me-2"></i>Responsive Design</h6>
                            <p class="small text-muted">
                                Giao diện tối ưu cho mọi thiết bị: máy tính, tablet, điện thoại
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 